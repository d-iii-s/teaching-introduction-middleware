\ProvidesPackage{slides-shared}


% Article Specific Initial Declarations
\ifdefined\doarticle
    \documentclass[a4paper]{article}
    \usepackage[margin=2cm]{geometry}
    \usepackage{beamerarticle}
\fi

% Beamer Specific Initial Declarations
\ifdefined\dobeamer
    \documentclass[ignorenonframetext]{beamer}
    \usetheme{Boadilla}
\fi


% ----------------------------------------------------------------
% Common Declarations

\usepackage{doi}
\usepackage{tikz}
\usepackage{siunitx}
\usepackage{hyperref}
\usepackage[type={CC},modifier={by-nc-sa},imagemodifier={-eu}]{doclicense}

%

\usepackage{listings}
\usepackage{fontspec}

\setmainfont{Linux Libertine O}
\setsansfont{Linux Biolinum O}
\setmonofont{Inconsolata ZI4}

\newfontfamily\monopico{Inconsolata ZI4}[Scale=0.55]
\newfontfamily\mononano{Inconsolata ZI4}[Scale=0.65]
\newfontfamily\monomini{Inconsolata ZI4}[Scale=0.75]
\newfontfamily\monomidi{Inconsolata ZI4}[Scale=0.85]
\newfontfamily\monobase{Inconsolata ZI4}[Scale=0.95]
\newfontfamily\monomaxi{Inconsolata ZI4}[Scale=1.05]

\lstset{
    basicstyle=\monobase,       % Monospaced font
    literate={-}{-}1,           % Do not replace dashes
    columns=fullflexible,       % Do not mess with column width
    keepspaces=true,            % Do not replace spaces
    escapeinside={/@}{@/},      % Permit escaping
}

\lstdefinelanguage{json}{
    basicstyle=\normalfont\ttfamily,
}

\lstdefinelanguage{yaml}{
    basicstyle=\normalfont\ttfamily,
    keywords={true,false,null,y,n},
}

\lstdefinelanguage{typescript}{
    basicstyle=\normalfont\ttfamily,
    morekeywords={break, case, catch, class, const, continue, debugger, default},
    morekeywords={delete, do, else, enum, export, extends, false, finally, for},
    morekeywords={function, if, import, in, instanceof, new, null, return},
    morekeywords={super, switch, this, throw, true, try, typeof, var},
    morekeywords={void, while, with},
    morekeywords={as, implements, interface, let, package, private, protected, public, static, yield},
    morekeywords={any, boolean, constructor, declare, get, module, require, number, set, string, symbol, type, from, of},
    morecomment=[l]{//},
    morecomment=[s]{/*}{*/},
    morestring=[b]',
    morestring=[b]"
}

\lstdefinestyle{pico}{basicstyle=\linespread{0.55}\monopico}
\lstdefinestyle{nano}{basicstyle=\linespread{0.65}\mononano}
\lstdefinestyle{mini}{basicstyle=\linespread{0.75}\monomini}
\lstdefinestyle{midi}{basicstyle=\linespread{0.85}\monomidi}
\lstdefinestyle{maxi}{basicstyle=\linespread{1.05}\monomaxi}

%

\usepackage[breakable,skins]{tcolorbox}

\newtcolorbox{textnote}[1][]{
    title={#1},
    colback=white,
    coltitle=black,
    colframe=black,
    colbacktitle=lightgray,
    boxrule=0.3pt,
    enhanced,
    breakable,
    sharp corners,
    drop lifted shadow,
    boxed title style={colframe=black,boxrule=0.3pt,sharp corners},
    attach boxed title to top left={xshift=-1mm,yshift=-1mm},
}

\newcommand\linenote[1]{\begin{textnote}{#1}\end{textnote}}

%

\newcommand\commitstrip[3]{
    \centering
    \includegraphics[width=#3\linewidth,keepaspectratio]{img/#2.jpg}

    \url{#1}
}

%

\subtitle{Introduction to Middleware}
\author{Vojtěch Horký \and Petr Tůma}
\institute{Department of Distributed and Dependable Systems\\Faculty of Mathematics and Physics\\Charles University}
\date{2010 -- 2020}

\newcommand\makepreamble{
    \maketitle
    \noindent \doclicenseText
    Created to support the Charles University Performance Evaluation lecture.
    See \url{http://d3s.mff.cuni.cz/teaching/introduction-to-middleware} for details.
    \tableofcontents
}


% ----------------------------------------------------------------
% Article Specific Declarations

\ifdefined\doarticle

%

\setbeamertemplate{frametitle}{
    \ \par\tcbox[
        fontupper=\bfseries,
        colback=black!10!white,
        boxrule=0.3pt,
        sharp corners,
        size=small,
        oversize,
    ]{\insertframetitle}
}

%

\setlength{\parindent}{0em}
\setlength{\parskip}{0.5ex}

%

\usepackage{enumitem}
\setlist{nosep}
\setlist[itemize]{label={--}}

%

\newcommand{\drawskip}{\medskip}

%

\newcommand\simplefootnote[1]{\footnote{#1}}

%

\fi % End Article Specific Declarations


% ----------------------------------------------------------------
% Beamer Specific Declarations

\ifdefined\dobeamer

%

\setbeamertemplate{footline}{}
\setbeamertemplate{navigation symbols}{\doclicenseIcon}

\AtBeginDocument{
    \begin{frame}
        \titlepage
    \end{frame}
}

\AtBeginPart{
    \begin{frame}
        \partpage
    \end{frame}
}

\AtBeginSection[]{
    \begin{frame}
        \frametitle{Outline}
        \tableofcontents[sectionstyle=show/shaded, subsectionstyle=hide]
    \end{frame}
}

%

\newcommand{\drawskip}{
  \begin{center}
    \line(1,0){250}
  \end{center}
}

%

\newcommand\simplefootnote[1]{\begingroup\renewcommand\thefootnote{}\footnote{#1}\addtocounter{footnote}{-1}\endgroup}

\fi % End Beamer Specific Declarations
